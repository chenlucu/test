"use strict";document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),new Vue({el:"body",data:function(){return{user:{},"package":[{name:"quarter",title:"季卡套餐",price:50,month:3,averagePrice:17,type:3},{name:"year",title:"年卡套餐",price:18,month:12,averagePrice:15,type:4,preferential:!0}],selectPackage:{},hasOldCard:!1,tipOldCard:crayfish.tipOldCard,comeFrom:(new UParams).come_from}},methods:{checkIsExpire:function(e){"object"!=typeof e&&(e=new Date(Date.parse(e)));var t=(e.getTime()-(new Date).getTime())/864e5;return t>0?Math.ceil(t):Math.floor(t)},checkout:function(e){this.selectPackage=e;var t=this.user;return t.user_id?(UBT.send("EVENT",{id:"qrcode"===this.comeFrom?"2034":"1994",user_id:t.user_id,params:{vip_type:e.type}}),void API.checkout(t.user_id,{user_id:t.user_id,card_type:this.selectPackage.type,user_name:t.username,phone:t.mobile,amount:1,come_from:navigator.userAgent.match(/iPhone|iPad/)?4:5}).then(function(e){var t=document.createElement("form");t.method="post",t.action=VARS.placeOrderUrl();for(var r in e){var a=document.createElement("input");a.type="hidden",a.name=r,a.value=e[r],t.appendChild(a)}document.body.appendChild(t),t.submit()})["catch"](function(e){return{}})):location.href=VARS.loginUrl()}},ready:function(){var e=this;API.user().then(function(t){e.user=t,e.hasOldCard=e.checkIsExpire(t.premium_vip.valid_end)>0})["catch"](function(){return{}})}});